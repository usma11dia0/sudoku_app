(()=>{"use strict";function t(t){let e=t.target,n=t.key;return"Enter"===n?(t.preventDefault(),void e.blur()):"Backspace"===n||"Delete"===n?(t.preventDefault(),void(e.textContent="")):void 0}function e(t){let e=t.target,n=e.getAttribute("data-old-value"),o=e.textContent;var l,u;1===(l=o).length&&(u=l)>="0"&&u<="9"?e.setAttribute("data-old-value",o):e.textContent=n}function n(t,e,n,o){for(let l=0;l<9;l++)for(let u=0;u<9;u++)if(l==t||u==e){const t=document.getElementById(`sudoku-${o}-cell-${l}-${u}`);n?t.classList.add("highlighted"):t.classList.remove("highlighted")}}document.addEventListener("DOMContentLoaded",(()=>{for(let o=0;o<9;o++)for(let l=0;l<9;l++){const u=document.getElementById(`sudoku-input-cell-${o}-${l}`);u.addEventListener("mouseover",(()=>n(o,l,!0,"input"))),u.addEventListener("mouseout",(()=>n(o,l,!1,"input"))),u.setAttribute("data-old-value",""),u.addEventListener("input",e),u.addEventListener("keydown",t);const d=document.getElementById(`sudoku-output-cell-${o}-${l}`);d.addEventListener("mouseover",(()=>n(o,l,!0,"output"))),d.addEventListener("mouseout",(()=>n(o,l,!1,"output")))}})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".problem-button").forEach((function(t){t.addEventListener("click",(async function(){const t=await this.dataset.buttonNumber;try{const e=await fetch(`http://localhost:8000/api/problem/${t}`);if(!e.ok)throw new Error(`HTTP error status: ${e.status}`);const n=await e.json();let o=[];for(let t=0;t<9;t++){let e=[];for(let o=0;o<9;o++){let l=parseInt(n[9*t+o]);l=0===l?"":l,e.push(l)}o.push(e)}if(o)for(let t=0;t<9;t++)for(let e=0;e<9;e++){document.getElementById(`sudoku-input-cell-${t}-${e}`).textContent=o[t][e]}else alert("問題が見つかりませんでした")}catch(t){console.log(`Error fetching data: ${t}`)}}))}))})),document.getElementById("input-button").addEventListener("click",(async()=>{const t=document.createElement("input");t.type="file",t.accept=".csv",t.addEventListener("change",(t=>{let e=t.target.files[0];e?function(t){const e=new FileReader;e.onload=function(t){const e=function(t){const e=t.split("\n"),n=[];for(let t=0;t<e.length;t++){const o=e[t].split(",");for(let t=0;t<o.length;t++)o[t]=o[t].trim();n.push(o)}return n}(t.target.result);for(let t=0;t<9;t++)for(let n=0;n<9;n++){const o=document.getElementById(`sudoku-input-cell-${t}-${n}`);o.setAttribute("data-old-value",e[t][n]),o.textContent=e[t][n]}},e.readAsText(t)}(e):alert("csvファイルを選択してください")})),t.click()})),document.getElementById("output-button").addEventListener("click",(async()=>{const t=[];for(let e=0;e<9;e++){const n=[];for(let t=0;t<9;t++){const o=document.getElementById(`sudoku-input-cell-${e}-${t}`).textContent;n.push(""===o?0:parseInt(o,10))}t.push(n)}const e=await fetch("http://localhost:8000/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(n)for(let t=0;t<9;t++)for(let e=0;e<9;e++){document.getElementById(`sudoku-output-cell-${t}-${e}`).textContent=n[t][e]}else alert("解答が見つかりませんでした")})),document.getElementById("delete-input-button").addEventListener("click",(async()=>{for(let t=0;t<9;t++)for(let e=0;e<9;e++){const n=document.getElementById(`sudoku-input-cell-${t}-${e}`);n.textContent="",n.setAttribute("data-old-value","")}})),document.getElementById("delete-output-button").addEventListener("click",(async()=>{for(let t=0;t<9;t++)for(let e=0;e<9;e++){document.getElementById(`sudoku-output-cell-${t}-${e}`).textContent=""}}))})();